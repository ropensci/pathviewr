<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rotate a tunnel so that perches are approximately aligned — rotate_tunnel • pathviewr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rotate a tunnel so that perches are approximately aligned — rotate_tunnel"><meta property="og:description" content="The rotation is applied about the height axis and affects tunnel length and
width only, i.e. no rotation of height."><meta property="og:image" content="https://docs.ropensci.org/pathviewr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pathviewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewr</a>
    </li>
    <li>
      <a href="../articles/managing-frame-gaps.html">Managing frame gaps with pathviewr</a>
    </li>
    <li>
      <a href="../articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ropensci/pathviewr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rotate a tunnel so that perches are approximately aligned</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/pathviewr/blob/HEAD/R/utility_functions.R" class="external-link"><code>R/utility_functions.R</code></a></small>
    <div class="hidden name"><code>rotate_tunnel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The rotation is applied about the height axis and affects tunnel length and
width only, i.e. no rotation of height.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">rotate_tunnel</span><span class="op">(</span>
  <span class="va">obj_name</span>,
  all_heights_min <span class="op">=</span> <span class="fl">0.11</span>,
  all_heights_max <span class="op">=</span> <span class="fl">0.3</span>,
  perch1_len_min <span class="op">=</span> <span class="op">-</span><span class="fl">0.06</span>,
  perch1_len_max <span class="op">=</span> <span class="fl">0.06</span>,
  perch2_len_min <span class="op">=</span> <span class="fl">2.48</span>,
  perch2_len_max <span class="op">=</span> <span class="fl">2.6</span>,
  perch1_wid_min <span class="op">=</span> <span class="fl">0.09</span>,
  perch1_wid_max <span class="op">=</span> <span class="fl">0.31</span>,
  perch2_wid_min <span class="op">=</span> <span class="fl">0.13</span>,
  perch2_wid_max <span class="op">=</span> <span class="fl">0.35</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obj_name</dt>
<dd><p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that has been passed
through <code><a href="relabel_viewr_axes.html">relabel_viewr_axes()</a></code> and <code><a href="gather_tunnel_data.html">gather_tunnel_data()</a></code> (or is
structured as though it has been passed through those functions).</p></dd>


<dt>all_heights_min</dt>
<dd><p>Minimum perch height</p></dd>


<dt>all_heights_max</dt>
<dd><p>Maximum perch height</p></dd>


<dt>perch1_len_min</dt>
<dd><p>Minimum length value of perch 1</p></dd>


<dt>perch1_len_max</dt>
<dd><p>Maximum length value of perch 1</p></dd>


<dt>perch2_len_min</dt>
<dd><p>Minimum length value of perch 2</p></dd>


<dt>perch2_len_max</dt>
<dd><p>Maximum length value of perch 2</p></dd>


<dt>perch1_wid_min</dt>
<dd><p>Minimum width value of perch 1</p></dd>


<dt>perch1_wid_max</dt>
<dd><p>Maximum width value of perch 1</p></dd>


<dt>perch2_wid_min</dt>
<dd><p>Minimum width value of perch 2</p></dd>


<dt>perch2_wid_max</dt>
<dd><p>Maximum width value of perch 2</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to/from other pathviewr functions</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>) in which data have
been rotated according to user specifications.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The user first estimates the locations of the perches by specifying
bounds for where each perch is located. The function then computes the
center of each bounding box and estimates that to be the midpoint of each
perch. Then the center point of the tunnel (center between the perch
midpoints) is estimated. The angle between perch1_center,
tunnel_center_point, and arbitrary point along the length axis
(tunnel_center_point - 1 on length) is estimated. That angle is then used
to rotate the data, again only in the length and width dimensions. Height
is standardized by (approximate) perch height; values greater than 0 are
above the perch and values less than 0 are below the perch level.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other data cleaning functions: 
<code><a href="gather_tunnel_data.html">gather_tunnel_data</a>()</code>,
<code><a href="get_full_trajectories.html">get_full_trajectories</a>()</code>,
<code><a href="quick_separate_trajectories.html">quick_separate_trajectories</a>()</code>,
<code><a href="redefine_tunnel_center.html">redefine_tunnel_center</a>()</code>,
<code><a href="relabel_viewr_axes.html">relabel_viewr_axes</a>()</code>,
<code><a href="rename_viewr_characters.html">rename_viewr_characters</a>()</code>,
<code><a href="select_x_percent.html">select_x_percent</a>()</code>,
<code><a href="separate_trajectories.html">separate_trajectories</a>()</code>,
<code><a href="standardize_tunnel.html">standardize_tunnel</a>()</code>,
<code><a href="trim_tunnel_outliers.html">trim_tunnel_outliers</a>()</code>,
<code><a href="visualize_frame_gap_choice.html">visualize_frame_gap_choice</a>()</code></p>
<p>Other tunnel standardization functions: 
<code><a href="redefine_tunnel_center.html">redefine_tunnel_center</a>()</code>,
<code><a href="standardize_tunnel.html">standardize_tunnel</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Vikram B. Baliga</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">## Import the example Motive data included in the package</span></span>
<span class="r-in"><span class="va">motive_data</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="read_motive_csv.html">read_motive_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pathviewr_motive_example_data.csv"</span>,</span>
<span class="r-in">                              package <span class="op">=</span> <span class="st">'pathviewr'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Clean the file. It is generally recommended to clean up to the</span></span>
<span class="r-in"><span class="co">## "trimmed" step before running rotate_tunnel().</span></span>
<span class="r-in"><span class="va">motive_trimmed</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="va">motive_data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="relabel_viewr_axes.html">relabel_viewr_axes</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="gather_tunnel_data.html">gather_tunnel_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="trim_tunnel_outliers.html">trim_tunnel_outliers</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Now rotate the tunnel using default values</span></span>
<span class="r-in"><span class="va">motive_rotated</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="va">motive_trimmed</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">rotate_tunnel</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## The following attributes store information about</span></span>
<span class="r-in"><span class="co">## how rotation &amp; translation was applied</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"rotation_degrees"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9022212</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"rotation_radians"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.01574673</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"perch1_midpoint_original"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.000 0.200 0.205</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"perch1_midpoint_current"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -1.270157e+00  4.645589e-15  2.050000e-01</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"tunnel_centerpoint_original"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.270 0.220 0.205</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"perch2_midpoint_original"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.540 0.240 0.205</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">motive_rotated</span>, <span class="st">"perch2_midpoint_current"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1.270157e+00 -4.645589e-15  2.050000e-01</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.vikram-baliga.com/" class="external-link">Vikram B. Baliga</a>, <a href="https://melissasarmstrong.com" class="external-link">Melissa S. Armstrong</a>, <a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric" class="external-link">Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

