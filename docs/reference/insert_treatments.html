<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Inserts treatment and experiment information — insert_treatments • pathviewr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Inserts treatment and experiment information — insert_treatments"><meta property="og:description" content="Adds information about treatment and experimental set up to viewr objects for
analysis in other pathviewr functions"><meta property="og:image" content="https://docs.ropensci.org/pathviewr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pathviewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewr</a>
    </li>
    <li>
      <a href="../articles/managing-frame-gaps.html">Managing frame gaps with pathviewr</a>
    </li>
    <li>
      <a href="../articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ropensci/pathviewr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Inserts treatment and experiment information</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/pathviewr/blob/HEAD/R/utility_functions.R" class="external-link"><code>R/utility_functions.R</code></a></small>
    <div class="hidden name"><code>insert_treatments.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds information about treatment and experimental set up to viewr objects for
analysis in other pathviewr functions</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">insert_treatments</span><span class="op">(</span>
  <span class="va">obj_name</span>,
  tunnel_config <span class="op">=</span> <span class="st">"box"</span>,
  perch_2_vertex <span class="op">=</span> <span class="cn">NULL</span>,
  vertex_angle <span class="op">=</span> <span class="cn">NULL</span>,
  tunnel_width <span class="op">=</span> <span class="cn">NULL</span>,
  tunnel_length <span class="op">=</span> <span class="cn">NULL</span>,
  stim_param_lat_pos <span class="op">=</span> <span class="cn">NULL</span>,
  stim_param_lat_neg <span class="op">=</span> <span class="cn">NULL</span>,
  stim_param_end_pos <span class="op">=</span> <span class="cn">NULL</span>,
  stim_param_end_neg <span class="op">=</span> <span class="cn">NULL</span>,
  treatment <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obj_name</dt>
<dd><p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p></dd>


<dt>tunnel_config</dt>
<dd><p>The configuration of the experimental tunnel.
Currently, pathviewr supports rectangular "box" and V-shaped tunnel
configurations.</p></dd>


<dt>perch_2_vertex</dt>
<dd><p>If using a V-shaped tunnel, this is the vertical
distance between the vertex and the height of the perches. If the tunnel does
not have perches, insert the vertical distance between the vertex and the
height of the origin (0,0,0).</p></dd>


<dt>vertex_angle</dt>
<dd><p>If using a V-shaped tunnel, the angle of the vertex (in
degrees) <code>vertex_angle</code> defaults to 90.</p></dd>


<dt>tunnel_width</dt>
<dd><p>If using a box-shaped tunnel, the width of the tunnel.</p></dd>


<dt>tunnel_length</dt>
<dd><p>The length of the tunnel.</p></dd>


<dt>stim_param_lat_pos</dt>
<dd><p>The size of the stimulus on the lateral positive
wall of the tunnel. Eg. for 10cm wide gratings,
<code>stim_param_lat_pos</code> = 0.1.</p></dd>


<dt>stim_param_lat_neg</dt>
<dd><p>The size of the stimulus on the lateral negative
wall of the tunnel..</p></dd>


<dt>stim_param_end_pos</dt>
<dd><p>The size of the stimulus on the end positive
wall of the tunnel.</p></dd>


<dt>stim_param_end_neg</dt>
<dd><p>The size of the stimulus on the end negative
wall of the tunnel.</p></dd>


<dt>treatment</dt>
<dd><p>The name of the treatment assigned to all rows of the viewr
object. Currently only able to accept a single treatment per viewr data
object.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"treatments added"</code>). Depending
on the argument <code>tunnel_config</code>, the viewr object also includes
columns storing the values of the supplied arguments. This experimental
information is also stored in the viewr object's metadata</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>All length measurements reported in meters.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other utility functions: 
<code><a href="clean_by_span.html">clean_by_span</a>()</code>,
<code><a href="remove_duplicate_frames.html">remove_duplicate_frames</a>()</code>,
<code><a href="remove_vel_anomalies.html">remove_vel_anomalies</a>()</code>,
<code><a href="set_traj_frametime.html">set_traj_frametime</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Eric R. Press</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"> <span class="co">## Import sample data from package</span></span>
<span class="r-in"> <span class="va">motive_data</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="read_motive_csv.html">read_motive_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pathviewr_motive_example_data.csv"</span>,</span>
<span class="r-in">                              package <span class="op">=</span> <span class="st">'pathviewr'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"> <span class="va">flydra_data</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="fu"><a href="read_flydra_mat.html">read_flydra_mat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pathviewr_flydra_example_data.mat"</span>,</span>
<span class="r-in">                              package <span class="op">=</span> <span class="st">'pathviewr'</span><span class="op">)</span>,</span>
<span class="r-in">                              subject_name <span class="op">=</span> <span class="st">"birdie_sanders"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co">## Clean data up to and including get_full_trajectories()</span></span>
<span class="r-in"><span class="va">motive_data_full</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="va">motive_data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="relabel_viewr_axes.html">relabel_viewr_axes</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="gather_tunnel_data.html">gather_tunnel_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="trim_tunnel_outliers.html">trim_tunnel_outliers</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="rotate_tunnel.html">rotate_tunnel</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="select_x_percent.html">select_x_percent</a></span><span class="op">(</span>desired_percent <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="separate_trajectories.html">separate_trajectories</a></span><span class="op">(</span>max_frame_gap <span class="op">=</span> <span class="st">"autodetect"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu"><a href="get_full_trajectories.html">get_full_trajectories</a></span><span class="op">(</span>span <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> autodetect is an experimental feature -- please report issues.</span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">flydra_data_full</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="va">flydra_data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="redefine_tunnel_center.html">redefine_tunnel_center</a></span><span class="op">(</span>length_method <span class="op">=</span> <span class="st">"middle"</span>,</span>
<span class="r-in">                        height_method <span class="op">=</span> <span class="st">"user-defined"</span>,</span>
<span class="r-in">                        height_zero <span class="op">=</span> <span class="fl">1.44</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="select_x_percent.html">select_x_percent</a></span><span class="op">(</span>desired_percent <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="separate_trajectories.html">separate_trajectories</a></span><span class="op">(</span>max_frame_gap <span class="op">=</span> <span class="st">"autodetect"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="get_full_trajectories.html">get_full_trajectories</a></span><span class="op">(</span>span <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> autodetect is an experimental feature -- please report issues.</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Now add information about the experimental configuration. In this example,</span></span>
<span class="r-in"><span class="co">## a V-shaped tunnel in which the vertex is 90deg and lies 0.40m below the</span></span>
<span class="r-in"><span class="co">## origin. The visual stimuli on the lateral and end walls have a cycle</span></span>
<span class="r-in"><span class="co">## length of 0.1m and 0.3m respectively, and the treatment is labeled</span></span>
<span class="r-in"><span class="co">## "lat10_end30"</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">motive_v</span> <span class="op">&lt;-</span></span>
<span class="r-in"><span class="va">motive_data_full</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu">insert_treatments</span><span class="op">(</span>tunnel_config <span class="op">=</span> <span class="st">"v"</span>,</span>
<span class="r-in">                   perch_2_vertex <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span class="r-in">                   vertex_angle <span class="op">=</span> <span class="fl">90</span>,</span>
<span class="r-in">                   tunnel_length <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">                   stim_param_lat_pos <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span class="r-in">                   stim_param_lat_neg <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span class="r-in">                   stim_param_end_pos <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span class="r-in">                   stim_param_end_neg <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span class="r-in">                   treatment <span class="op">=</span> <span class="st">"lat10_end_30"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For an experiment using the box-shaped configuration where the tunnel is 1m</span></span>
<span class="r-in"><span class="co"># wide and 3m long and the visual stimuli on the lateral and end walls have a</span></span>
<span class="r-in"><span class="co"># cycle length of 0.2 and 0.3m, respectively, and the treatment is labeled</span></span>
<span class="r-in"><span class="co"># "lat20_end30".</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">flydra_box</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="va">flydra_data_full</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu">insert_treatments</span><span class="op">(</span>tunnel_config <span class="op">=</span> <span class="st">"box"</span>,</span>
<span class="r-in">                   tunnel_width <span class="op">=</span> <span class="fl">1</span>,</span>
<span class="r-in">                   tunnel_length <span class="op">=</span> <span class="fl">3</span>,</span>
<span class="r-in">                   stim_param_lat_pos <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span class="r-in">                   stim_param_lat_neg <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span class="r-in">                   stim_param_end_pos <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span class="r-in">                   stim_param_end_neg <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span class="r-in">                   treatment <span class="op">=</span> <span class="st">"lat20_end30"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Check out the new columns in the resulting objects</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">motive_v</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "tunnel_config"      "perch_2_vertex"     "vertex_angle"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "tunnel_length"      "stim_param_lat_pos" "stim_param_lat_neg"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "stim_param_end_pos" "stim_param_end_neg" "treatment"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "frame"              "time_sec"           "subject"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "position_length"    "position_width"     "position_height"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "rotation_length"    "rotation_width"     "rotation_height"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "rotation_real"      "mean_marker_error"  "traj_id"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] "file_sub_traj"      "traj_length"        "start_length"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "end_length"         "length_diff"        "start_length_sign" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [28] "end_length_sign"    "direction"         </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">flydra_box</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "tunnel_config"      "tunnel_width"       "tunnel_length"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "stim_param_lat_pos" "stim_param_lat_neg" "stim_param_end_pos"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "stim_param_end_neg" "treatment"          "frame"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "time_sec"           "subject"            "position_length"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "position_width"     "position_height"    "velocity"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "length_inst_vel"    "width_inst_vel"     "height_inst_vel"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "traj_id"            "file_sub_traj"      "traj_length"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] "start_length"       "end_length"         "length_diff"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "start_length_sign"  "end_length_sign"    "direction"         </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.vikram-baliga.com/" class="external-link">Vikram B. Baliga</a>, <a href="https://melissasarmstrong.com" class="external-link">Melissa S. Armstrong</a>, <a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric" class="external-link">Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

