<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrangle, Analyze, and Visualize Animal Movement Data • pathviewr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Wrangle, Analyze, and Visualize Animal Movement Data">
<meta property="og:description" content="Tools to import, clean, and visualize movement data, particularly from motion capture systems such as Optitracks Motive, the Straw Labs Flydra, or from other sources. We provide functions to remove artifacts, standardize tunnel position and tunnel axes, select a region of interest, isolate specific trajectories, fill gaps in trajectory data, and calculate 3D and per-axis velocity. For experiments of visual guidance, we also provide functions that use subject position to estimate perception of visual stimuli.">
<meta property="og:image" content="https://docs.ropensci.org/pathviewr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pathviewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewr</a>
    </li>
    <li>
      <a href="articles/managing-frame-gaps.html">Managing frame gaps with pathviewr</a>
    </li>
    <li>
      <a href="articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/pathviewr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="pathviewr">pathviewr<a class="anchor" aria-label="anchor" href="#pathviewr"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>pathviewr</code> offers tools to import, clean, and visualize movement data, particularly from motion capture systems such as <a href="https://optitrack.com/software/motive/" class="external-link">Optitrack’s Motive</a>, the <a href="https://github.com/strawlab/flydra" class="external-link">Straw Lab’s Flydra</a>, or other sources. We provide functions to remove artifacts, standardize tunnel position and tunnel axes, select a region of interest, isolate specific trajectories, fill gaps in trajectory data, and calculate 3D and per-axis velocity. For experiments of visual guidance, we also provide functions that use subject position to estimate perception of visual stimuli.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <code>pathviewr</code> from CRAN via:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pathviewr"</span><span class="op">)</span></span></code></pre></div>
<p>Or to get the latest (developmental) version through GitHub, use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropensci/pathviewr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level4">
<h4 id="data-import-and-cleaning-via-pathviewr">Data import and cleaning via <code>pathviewr</code>
<a class="anchor" aria-label="anchor" href="#data-import-and-cleaning-via-pathviewr"></a>
</h4>
<p>We’ll also load two <code>tidyverse</code> packages for wrangling &amp; plotting in this readme.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/pathviewr">pathviewr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<p>We will import and clean a sample data set from <code>.csv</code> files exported by Optitrack’s <a href="https://optitrack.com/software/motive/" class="external-link">Motive</a> software. For examples of how to import and clean other types of data, <a href="https://docs.ropensci.org/pathviewr/articles/data-import-cleaning.html">see the Basics of data import and cleaning vignette</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Import the Motive example data included in </span></span>
<span><span class="co">## the package</span></span>
<span></span>
<span><span class="va">motive_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/read_motive_csv.html">read_motive_csv</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pathviewr_motive_example_data.csv"</span>,</span>
<span>                package <span class="op">=</span> <span class="st">'pathviewr'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Several functions to clean and wrangle data are available, and we have a suggested pipeline for how these steps should be handled. For this example, we will use one of two “all-in-one” functions: <code><a href="reference/clean_viewr.html">clean_viewr()</a></code>. <a href="https://docs.ropensci.org/pathviewr/articles/data-import-cleaning.html">See the Basics of data import and cleaning vignette</a> for the full pipeline and the other “all-in-one” function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">motive_allinone</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">motive_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/clean_viewr.html">clean_viewr</a></span><span class="op">(</span></span>
<span>    relabel_viewr_axes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    gather_tunnel_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    trim_tunnel_outliers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    standardization_option <span class="op">=</span> <span class="st">"rotate_tunnel"</span>,</span>
<span>    select_x_percent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    desired_percent <span class="op">=</span> <span class="fl">50</span>,</span>
<span>    rename_viewr_characters <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    separate_trajectories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    max_frame_gap <span class="op">=</span> <span class="st">"autodetect"</span>,</span>
<span>    get_full_trajectories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    span <span class="op">=</span> <span class="fl">0.95</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; autodetect is an experimental feature -- please report issues.</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Quick plot</span></span>
<span><span class="co">## Colors correspond to unique trajectories (file_sub_traj)</span></span>
<span><span class="va">motive_allinone</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">position_length</span>, y <span class="op">=</span> <span class="va">position_width</span>, </span>
<span>             fill <span class="op">=</span> <span class="va">file_sub_traj</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-all_in_one-1.png" width="100%"></p>
<p>To get a sense of what we’ve done, compare the data before and after it has passed through the pipeline.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Check out the data's structure before cleaning and wrangling:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">motive_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [934 × 26] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ frame                     : int [1:934] 72210 72211 72212 72213 72214 72215 72216 72217 72218 72219 ...</span></span>
<span><span class="co">#&gt;  $ time_sec                  : num [1:934] 722 722 722 722 722 ...</span></span>
<span><span class="co">#&gt;  $ device02_rotation_x       : num [1:934] 0.1346 0.0819 0.2106 0.1961 0.1305 ...</span></span>
<span><span class="co">#&gt;  $ device02_rotation_y       : num [1:934] -0.977 -0.978 -0.973 -0.972 -0.975 ...</span></span>
<span><span class="co">#&gt;  $ device02_rotation_z       : num [1:934] -0.1117 -0.0991 -0.0939 -0.1275 -0.1213 ...</span></span>
<span><span class="co">#&gt;  $ device02_rotation_w       : num [1:934] 0.1215 0.1654 0.0311 0.0351 0.1315 ...</span></span>
<span><span class="co">#&gt;  $ device02_position_x       : num [1:934] 0.142 0.137 0.125 0.118 0.113 ...</span></span>
<span><span class="co">#&gt;  $ device02_position_y       : num [1:934] 0.16 0.164 0.166 0.168 0.173 ...</span></span>
<span><span class="co">#&gt;  $ device02_position_z       : num [1:934] 2 1.97 1.95 1.92 1.89 ...</span></span>
<span><span class="co">#&gt;  $ device02_mean_marker_error: num [1:934] 0.000113 0.000105 0.000115 0.000202 0.000106 0.000095 0.000114 0.000117 0.000121 0.000131 ...</span></span>
<span><span class="co">#&gt;  $ device03_rotation_x       : num [1:934] 0.107 0.111 0.109 0.109 0.108 ...</span></span>
<span><span class="co">#&gt;  $ device03_rotation_y       : num [1:934] -0.295 -0.295 -0.295 -0.295 -0.295 ...</span></span>
<span><span class="co">#&gt;  $ device03_rotation_z       : num [1:934] -0.088 -0.0866 -0.0853 -0.0853 -0.0879 ...</span></span>
<span><span class="co">#&gt;  $ device03_rotation_w       : num [1:934] 0.945 0.945 0.945 0.945 0.945 ...</span></span>
<span><span class="co">#&gt;  $ device03_position_x       : num [1:934] 0.222 0.222 0.222 0.222 0.222 ...</span></span>
<span><span class="co">#&gt;  $ device03_position_y       : num [1:934] 0.245 0.245 0.245 0.245 0.245 ...</span></span>
<span><span class="co">#&gt;  $ device03_position_z       : num [1:934] 0.0597 0.0597 0.0598 0.0598 0.0598 ...</span></span>
<span><span class="co">#&gt;  $ device03_mean_marker_error: num [1:934] 0.000166 0.000172 0.000164 0.000163 0.000162 0.000162 0.000169 0.00017 0.00017 0.000213 ...</span></span>
<span><span class="co">#&gt;  $ device05_rotation_x       : num [1:934] 0.00672 0.00714 0.00709 0.00742 0.00826 ...</span></span>
<span><span class="co">#&gt;  $ device05_rotation_y       : num [1:934] 0.944 0.944 0.944 0.944 0.944 ...</span></span>
<span><span class="co">#&gt;  $ device05_rotation_z       : num [1:934] -0.117 -0.116 -0.118 -0.118 -0.117 ...</span></span>
<span><span class="co">#&gt;  $ device05_rotation_w       : num [1:934] 0.308 0.308 0.309 0.31 0.308 ...</span></span>
<span><span class="co">#&gt;  $ device05_position_x       : num [1:934] 0.173 0.173 0.173 0.173 0.173 ...</span></span>
<span><span class="co">#&gt;  $ device05_position_y       : num [1:934] 0.243 0.243 0.243 0.243 0.243 ...</span></span>
<span><span class="co">#&gt;  $ device05_position_z       : num [1:934] 2.66 2.66 2.66 2.66 2.66 ...</span></span>
<span><span class="co">#&gt;  $ device05_mean_marker_error: num [1:934] 0.000241 0.000247 0.000255 0.000244 0.00023 0.000226 0.000231 0.000236 0.000242 0.000263 ...</span></span>
<span><span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">#&gt;  - attr(*, "pathviewr_steps")= chr "viewr"</span></span>
<span><span class="co">#&gt;  - attr(*, "file_id")= chr "pathviewr_motive_example_data.csv"</span></span>
<span><span class="co">#&gt;  - attr(*, "file_mtime")= POSIXct[1:1], format: "2025-06-13 10:44:21"</span></span>
<span><span class="co">#&gt;  - attr(*, "frame_rate")= num 100</span></span>
<span><span class="co">#&gt;  - attr(*, "header")='data.frame':   11 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ metadata: chr [1:11] "Format Version" "Take Name" "Take Notes" "Capture Frame Rate" ...</span></span>
<span><span class="co">#&gt;   ..$ value   : chr [1:11] "1.23" "sept-18_mixed-group_16-30" "" "100.000000" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "Motive_IDs")= chr [1:24] "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "subject_names_full")= chr [1:24] "device02" "device02" "device02" "device02" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "subject_names_simple")= chr [1:3] "device02" "device03" "device05"</span></span>
<span><span class="co">#&gt;  - attr(*, "data_names")= chr [1:26] "frame" "time_sec" "device02_rotation_x" "device02_rotation_y" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "data_types_full")= chr [1:24] "Rigid Body" "Rigid Body" "Rigid Body" "Rigid Body" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "data_types_simple")= chr "Rigid Body"</span></span>
<span><span class="co">#&gt;  - attr(*, "d1")= chr [1:26] "" "" "Rotation" "Rotation" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "d2")= chr [1:26] "Frame" "Time (Seconds)" "X" "Y" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "import_method")= chr "motive"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Check out the data's structure after cleaning and wrangling:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">motive_allinone</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [449 × 24] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ frame            : int [1:449] 72213 72214 72215 72216 72217 72218 72219 72220 72221 72222 ...</span></span>
<span><span class="co">#&gt;  $ time_sec         : num [1:449] 722 722 722 722 722 ...</span></span>
<span><span class="co">#&gt;  $ subject          : chr [1:449] "device02" "device02" "device02" "device02" ...</span></span>
<span><span class="co">#&gt;  $ position_length  : num [1:449] 0.647 0.62 0.593 0.567 0.541 ...</span></span>
<span><span class="co">#&gt;  $ position_width   : num [1:449] -0.112 -0.116 -0.122 -0.134 -0.141 ...</span></span>
<span><span class="co">#&gt;  $ position_height  : num [1:449] -0.0371 -0.0324 -0.0273 -0.0235 -0.0209 ...</span></span>
<span><span class="co">#&gt;  $ rotation_length  : num [1:449] -0.128 -0.121 -0.105 -0.106 -0.149 ...</span></span>
<span><span class="co">#&gt;  $ rotation_width   : num [1:449] 0.1961 0.1305 0.0935 0.1798 0.164 ...</span></span>
<span><span class="co">#&gt;  $ rotation_height  : num [1:449] -0.972 -0.975 -0.975 -0.975 -0.972 ...</span></span>
<span><span class="co">#&gt;  $ rotation_real    : num [1:449] 0.0351 0.1315 0.1734 0.0807 0.0824 ...</span></span>
<span><span class="co">#&gt;  $ mean_marker_error: num [1:449] 0.000202 0.000106 0.000095 0.000114 0.000117 0.000121 0.000131 0.00014 0.000113 0.000114 ...</span></span>
<span><span class="co">#&gt;  $ velocity         : num [1:449] 2.73 2.78 2.84 2.85 2.68 ...</span></span>
<span><span class="co">#&gt;  $ length_inst_vel  : num [1:449] -2.65 -2.72 -2.74 -2.58 -2.56 ...</span></span>
<span><span class="co">#&gt;  $ width_inst_vel   : num [1:449] -0.642 -0.387 -0.58 -1.139 -0.75 ...</span></span>
<span><span class="co">#&gt;  $ height_inst_vel  : num [1:449] 0.184 0.475 0.508 0.379 0.258 ...</span></span>
<span><span class="co">#&gt;  $ traj_id          : int [1:449] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ file_sub_traj    : chr [1:449] "pathviewr_motive_example_data.csv_device02_0" "pathviewr_motive_example_data.csv_device02_0" "pathviewr_motive_example_data.csv_device02_0" "pathviewr_motive_example_data.csv_device02_0" ...</span></span>
<span><span class="co">#&gt;  $ traj_length      : int [1:449] 63 63 63 63 63 63 63 63 63 63 ...</span></span>
<span><span class="co">#&gt;  $ start_length     : num [1:449] 0.647 0.647 0.647 0.647 0.647 ...</span></span>
<span><span class="co">#&gt;  $ end_length       : num [1:449] -0.656 -0.656 -0.656 -0.656 -0.656 ...</span></span>
<span><span class="co">#&gt;  $ length_diff      : num [1:449] 1.3 1.3 1.3 1.3 1.3 ...</span></span>
<span><span class="co">#&gt;  $ start_length_sign: num [1:449] 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ end_length_sign  : num [1:449] -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...</span></span>
<span><span class="co">#&gt;  $ direction        : chr [1:449] "leftwards" "leftwards" "leftwards" "leftwards" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "file_id")= chr "pathviewr_motive_example_data.csv"</span></span>
<span><span class="co">#&gt;  - attr(*, "file_mtime")= POSIXct[1:1], format: "2025-06-13 10:44:21"</span></span>
<span><span class="co">#&gt;  - attr(*, "frame_rate")= num 100</span></span>
<span><span class="co">#&gt;  - attr(*, "header")='data.frame':   11 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ metadata: chr [1:11] "Format Version" "Take Name" "Take Notes" "Capture Frame Rate" ...</span></span>
<span><span class="co">#&gt;   ..$ value   : chr [1:11] "1.23" "sept-18_mixed-group_16-30" "" "100.000000" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "Motive_IDs")= chr [1:24] "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" "\"9E207518D8A311E969D7AB6B1FACE49B\"" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "subject_names_full")= chr [1:24] "device02" "device02" "device02" "device02" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "subject_names_simple")= chr [1:3] "device02" "device03" "device05"</span></span>
<span><span class="co">#&gt;  - attr(*, "data_names")= chr [1:26] "frame" "time_sec" "device02_rotation_x" "device02_rotation_y" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "data_types_full")= chr [1:24] "Rigid Body" "Rigid Body" "Rigid Body" "Rigid Body" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "data_types_simple")= chr "Rigid Body"</span></span>
<span><span class="co">#&gt;  - attr(*, "d1")= chr [1:26] "" "" "Rotation" "Rotation" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "d2")= chr [1:26] "Frame" "Time (Seconds)" "X" "Y" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "import_method")= chr "motive"</span></span>
<span><span class="co">#&gt;  - attr(*, "pathviewr_steps")= chr [1:10] "viewr" "renamed_tunnel" "gathered_tunnel" "artifacts_removed" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "perch1_midpoint_original")= num [1:3] 0 0.2 0.205</span></span>
<span><span class="co">#&gt;  - attr(*, "perch2_midpoint_original")= num [1:3] 2.54 0.24 0.205</span></span>
<span><span class="co">#&gt;  - attr(*, "tunnel_centerpoint_original")= num [1:3] 1.27 0.22 0.205</span></span>
<span><span class="co">#&gt;  - attr(*, "rotation_degrees")= num 0.902</span></span>
<span><span class="co">#&gt;  - attr(*, "rotation_radians")= num 0.0157</span></span>
<span><span class="co">#&gt;  - attr(*, "perch1_midpoint_current")= num [1:3] -1.27 4.65e-15 2.05e-01</span></span>
<span><span class="co">#&gt;  - attr(*, "perch2_midpoint_current")= num [1:3] 1.27 -4.65e-15 2.05e-01</span></span>
<span><span class="co">#&gt;  - attr(*, "percent_selected")= num 50</span></span>
<span><span class="co">#&gt;  - attr(*, "full_tunnel_length")= num 2.64</span></span>
<span><span class="co">#&gt;  - attr(*, "selected_tunnel_length")= num 1.32</span></span>
<span><span class="co">#&gt;  - attr(*, "max_frame_gap")= int [1:3] 1 1 2</span></span>
<span><span class="co">#&gt;  - attr(*, "span")= num 0.95</span></span>
<span><span class="co">#&gt;  - attr(*, "trajectories_removed")= int 5</span></span></code></pre></div>
<p>An important aspect of how <code>pathviewr</code> defines trajectories is by managing gaps in the data. <a href="https://docs.ropensci.org/pathviewr/articles/managing-frame-gaps.html">See the vignette on Managing frame gaps</a> for more information on trajectory definition and frame gaps.</p>
<p>Now that the data is cleaned, <code>pathviewr</code> includes functions that estimate visual perceptions based on the distance between the subject/observer and visual stimuli on the walls of the experimental tunnel. For a complete description of these functions, <a href="https://docs.ropensci.org/pathviewr/articles/visual-perception-functions.html">see the vignette on Estimating visual perceptions from tracking data</a>.</p>
</div>
<div class="section level4">
<h4 id="add-more-info-about-experiments">Add more info about experiments<a class="anchor" aria-label="anchor" href="#add-more-info-about-experiments"></a>
</h4>
<p>Now that our objects have been cleaned, we will use <code><a href="reference/insert_treatments.html">insert_treatments()</a></code> to add information about the experiments that are necessary for calculating visual perceptions.</p>
<p>The data from this example were recorded in a V-shaped tunnel. Accordingly, the vertex angle and vertex height of the tunnel, along with information about the visual stimuli used during the experiment, will be added to the data to inform calculations of visual perception (next section).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">motive_V</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">motive_allinone</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/insert_treatments.html">insert_treatments</a></span><span class="op">(</span></span>
<span>    tunnel_config <span class="op">=</span> <span class="st">"v"</span>,</span>
<span>    perch_2_vertex <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>    vertex_angle <span class="op">=</span> <span class="fl">90</span>,</span>
<span>    tunnel_length <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    stim_param_lat_pos <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    stim_param_lat_neg <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    stim_param_end_pos <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>    stim_param_end_neg <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>    treatment <span class="op">=</span> <span class="st">"lat10_end_30"</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="estimate-perception-of-visual-stimuli">Estimate perception of visual stimuli<a class="anchor" aria-label="anchor" href="#estimate-perception-of-visual-stimuli"></a>
</h4>
<p>To calculate the spatial frequency of the visual stimuli as perceived by the subject some distance from the stimuli, we will use <code><a href="reference/get_sf.html">get_sf()</a></code>.</p>
<p>This will require two intermediate steps: 1) calculating the minimum distance between a subject and each wall (via <code><a href="reference/calc_min_dist_v.html">calc_min_dist_v()</a></code>) and 2) estimating the visual angles from the subject’s perspective (<code><a href="reference/get_vis_angle.html">get_vis_angle()</a></code>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">motive_V_sf</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">motive_V</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/calc_min_dist_v.html">calc_min_dist_v</a></span><span class="op">(</span>simplify_output <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_vis_angle.html">get_vis_angle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/get_sf.html">get_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Visualizing the calculations provides an more intuitive understanding of how these visual perceptions change as the subject moves throughout the tunnel. Please <a href="https://docs.ropensci.org/pathviewr/articles/visual-perception-functions.html">see the vignette on Estimating visual perceptions from tracking data</a> for more examples of visualizing calculations.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">motive_V_sf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">position_width</span>, y <span class="op">=</span> <span class="va">position_height</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">sf_pos</span><span class="op">)</span>, shape<span class="op">=</span><span class="fl">1</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>,         <span class="co"># dimensions of the positive wall</span></span>
<span>                  y <span class="op">=</span> <span class="op">-</span><span class="fl">0.3855</span>,</span>
<span>                  xend <span class="op">=</span> <span class="fl">0.5869</span>,</span>
<span>                  yend <span class="op">=</span> <span class="fl">0.2014</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>,         <span class="co"># dimensions of the negative wall</span></span>
<span>                   y <span class="op">=</span> <span class="op">-</span><span class="fl">0.3855</span>,</span>
<span>                   xend <span class="op">=</span> <span class="op">-</span><span class="fl">0.5869</span>,</span>
<span>                   yend <span class="op">=</span> <span class="fl">0.2014</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"none"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning in geom_segment(aes(x = 0, y = -0.3855, xend = 0.5869, yend = 0.2014)): All aesthetics have length 1, but the data has 449 rows.</span></span>
<span><span class="co">#&gt; ℹ Please consider using `annotate()` or provide this layer with data containing</span></span>
<span><span class="co">#&gt;   a single row.</span></span>
<span><span class="co">#&gt; Warning in geom_segment(aes(x = 0, y = -0.3855, xend = -0.5869, yend = 0.2014)): All aesthetics have length 1, but the data has 449 rows.</span></span>
<span><span class="co">#&gt; ℹ Please consider using `annotate()` or provide this layer with data containing</span></span>
<span><span class="co">#&gt;   a single row.</span></span></code></pre></div>
<p><img src="reference/figures/README-motive_V_sf_pos-1.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="contributing-andor-raising-issues">Contributing and/or raising Issues<a class="anchor" aria-label="anchor" href="#contributing-andor-raising-issues"></a>
</h2>
<p>We welcome feedback on bugs, improvements, and/or feature requests. Please <a href="https://github.com/ropensci/pathviewr/issues/new/choose" class="external-link">see our Issues templates on GitHub</a> to make a bug fix request or feature request.</p>
<p>To contribute code via a pull request, please consult our <a href="https://github.com/ropensci/pathviewr/blob/master/.github/CONTRIBUTING.md" class="external-link">Contributing Guide</a> first.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>The preferred way to cite <code>pathviewr</code> (but subject to change) is:</p>
<p>Baliga VB, Armstrong MS, Press ER (2021). <em>pathviewr: Tools to import, clean, and visualize animal movement data in R</em>. R package version 1.1.8, <a href="https://github.com/ropensci/pathviewr" class="external-link uri">https://github.com/ropensci/pathviewr</a>. doi: 10.5281/zenodo.4270187</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>GPL (&gt;= 3) + file LICENSE</p>
<p>🐢</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=pathviewr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/pathviewr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/pathviewr/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pathviewr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.vikram-baliga.com/" class="external-link">Vikram B. Baliga</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9367-8974" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://melissasarmstrong.com" class="external-link">Melissa S. Armstrong</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3059-0094" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric" class="external-link">Eric R. Press</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1944-3755" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/ropensci/pathviewr/actions" class="external-link"><img src="https://github.com/ropensci/pathviewr/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://app.codecov.io/gh/ropensci/pathviewr?branch=master" class="external-link"><img src="https://codecov.io/gh/ropensci/pathviewr/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/ropensci/software-review/issues/409" class="external-link"><img src="https://badges.ropensci.org/409_status.svg"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/268906628" class="external-link"><img src="https://zenodo.org/badge/268906628.svg" alt="DOI"></a></li>
<li><a href="https://CRAN.R-project.org/package=pathviewr" class="external-link"><img src="https://www.r-pkg.org/badges/version/pathviewr" alt="CRAN status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.vikram-baliga.com/" class="external-link">Vikram B. Baliga</a>, <a href="https://melissasarmstrong.com" class="external-link">Melissa S. Armstrong</a>, <a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric" class="external-link">Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
