<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrangle, Analyze, and Visualize Animal Movement Data ‚Ä¢ pathviewR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Wrangle, Analyze, and Visualize Animal Movement Data">
<meta property="og:description" content="Tools to import, clean, and visualize 
    animal movement data from Optitrack's Motive, from Flydra, or from 
    another source. We provide functions to remove artifacts, standardize
    tunnel position and tunnel axes, select a region of interest, isolate 
    specific trajectories, fill gaps in trajectory data, and calculate 3D
    and per-axis velocity. For experiments of visual guidance, we also 
    provide functions that use animal position to estimate perception of
    visual stimuli. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pathviewR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewR</a>
    </li>
    <li>
      <a href="articles/managing-frame-gaps.html">Managing frame gaps with pathviewR</a>
    </li>
    <li>
      <a href="articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vbaliga/pathviewR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="pathviewr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pathviewr" class="anchor"></a>pathviewR</h1></div>
<!-- badges: start -->

<p><code>pathviewR</code> offers tools to import, clean, and visualize animal movement data from <a href="https://optitrack.com/products/motive/">Optitrack‚Äôs Motive</a>, the <a href="https://github.com/strawlab/flydra">Straw Lab‚Äôs Flydra</a>, or from other sources. We provide functions to remove artifacts, standardize tunnel position and tunnel axes, select a region of interest, isolate specific trajectories, fill gaps in trajectory data, and calculate 3D and per-axis velocity. For experiments of visual guidance, we also provide functions that use animal position to estimate perception of visual stimuli.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>This package can be installed via:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co">#install.packages("devtools") # if devtools is not installed</span>
<span class="kw">devtools</span>::<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"vbaliga/pathviewR"</span>)
</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Data import and cleaning via <code>pathviewR</code>; we‚Äôll also load two <code>tidyverse</code> packages for wrangling &amp; plotting.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/vbaliga/pathviewR">pathviewR</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">magrittr</span>)
</pre></div>
<p>We will import and clean a sample data set from <code>.csv</code> files exported by <a href="https://optitrack.com/products/motive/">Optitrack‚Äôs Motive</a> software. For examples of how to import and clean other types of data, <a href="https://vbaliga.github.io/pathviewR/articles/data-import-cleaning.html">see the data import and cleaning vignette</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co">## Import the Motive example data included in </span>
<span class="co">## the package</span>

<span class="kw">motive_data</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/read_motive_csv.html">read_motive_csv</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"pathviewR_motive_example_data.csv"</span>,
                package = <span class="st">'pathviewR'</span>)
  )
</pre></div>
<p>Several functions to clean and wrangle data are available, and we have a suggested pipeline for how these steps should be handled. For this example, we will use one of two ‚Äúall-in-one‚Äù functions: <code><a href="reference/clean_viewr.html">clean_viewr()</a></code>. <a href="https://vbaliga.github.io/pathviewR/articles/data-import-cleaning.html">See the Data Import and Cleaning vignette</a> for the full pipeline and the other ‚Äúall-in-one‚Äù function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">motive_allinone</span> <span class="op">&lt;-</span>
  <span class="kw">motive_data</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/clean_viewr.html">clean_viewr</a></span>(
    relabel_viewr_axes = <span class="fl">TRUE</span>,
    gather_tunnel_data = <span class="fl">TRUE</span>,
    trim_tunnel_outliers = <span class="fl">TRUE</span>,
    standardization_option = <span class="st">"rotate_tunnel"</span>,
    select_x_percent = <span class="fl">TRUE</span>,
    desired_percent = <span class="fl">50</span>,
    rename_viewr_characters = <span class="fl">FALSE</span>,
    separate_trajectories = <span class="fl">TRUE</span>,
    max_frame_gap = <span class="st">"autodetect"</span>,
    get_full_trajectories = <span class="fl">TRUE</span>,
    span = <span class="fl">0.95</span>
  )
<span class="co">#&gt; autodetect is an experimental feature -- please report issues.</span>

<span class="co">## Quick plot</span>
<span class="co">## Colors correspond to unique trajectories (file_sub_traj)</span>
<span class="kw">motive_allinone</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">position_length</span>, y = <span class="kw">position_width</span>, 
             fill = <span class="kw">file_sub_traj</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(pch = <span class="fl">21</span>) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span>() <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>() <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(
    legend.position = <span class="st">"none"</span>
  )
</pre></div>
<p><img src="reference/figures/README-all-in-one-1.png" width="100%"></p>
<p>An important aspect of how <code>pathviewR</code> defines trajectories is by managing gaps in the data. <a href="https://vbaliga.github.io/pathviewR/articles/managing-frame-gaps.html">See the Managing Frame Gaps vignette</a> for more information on trajectory definition and frame gaps.</p>
<p>Now that the data is cleaned, <code>pathviewR</code> includes functions that estimate visual perceptions based on the distance between the subject/observer and visual stimuli on the walls of the experimental tunnel. For a complete description of these functions, <a href="https://vbaliga.github.io/pathviewR/articles/visual-perception-functions.html">see the Visual Perception Functions vignette</a>.</p>
<p>Now that our objects have been cleaned, we will use <code><a href="reference/insert_treatments.html">insert_treatments()</a></code> to add information about the experiments that are necessary for calculating visual perceptions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">motive_V</span> <span class="op">&lt;-</span> 
  <span class="kw">motive_allinone</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/insert_treatments.html">insert_treatments</a></span>(vertex_height = <span class="op">-</span><span class="fl">0.3855</span>,
                    vertex_angle = <span class="fl">45</span>,
                    stim_param_pos = <span class="fl">0.1</span>,
                    stim_param_neg = <span class="fl">0.2</span>,
                    treatment = <span class="st">"latB"</span>)
</pre></div>
<p>To calculate the spatial frequency of the visual stimuli as perceived by the subject some distance from the stimuli, we will use <code><a href="reference/calc_sf_V.html">calc_sf_V()</a></code>.</p>
<p>The resulting object contains 10 new variables which are values involved in the calculation of spatial frequency.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">motive_V_sf</span> <span class="op">&lt;-</span> 
  <span class="kw">motive_V</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/calc_sf_V.html">calc_sf_V</a></span>(simplify_output = <span class="fl">FALSE</span>)
</pre></div>
<p>To calculate an estimation of the visual angles perceived by the subject, we will use <code>calc_vis_angle_V</code>.</p>
<p>The resulting object contains 12 new variables which are values involved in the calculation of visual angles.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">motive_V_angle</span> <span class="op">&lt;-</span> 
  <span class="kw">motive_V</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/calc_vis_angle_V.html">calc_vis_angle_V</a></span>(simplify_output=<span class="fl">FALSE</span>)
</pre></div>
<p>Visualizing the calculations provides an more intuitive understanding of how these visual perceptions change as the subject moves throughout the tunnel. Please <a href="https://vbaliga.github.io/pathviewR/articles/visual-perception-functions.html">see the Visual Perception Functions vignette</a> for more examples of visualizing calculations.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">motive_V_sf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">position_width</span>, y = <span class="kw">position_height</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(color = <span class="kw">sf_pos</span>), shape=<span class="fl">1</span>, size=<span class="fl">3</span>) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="fl">0</span>,         <span class="co"># dimensions of the positive wall</span>
                  y = <span class="op">-</span><span class="fl">0.3855</span>,
                  xend = <span class="fl">0.5869</span>,
                  yend = <span class="fl">0.2014</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="fl">0</span>,         <span class="co"># dimensions of the negative wall</span>
                   y = <span class="op">-</span><span class="fl">0.3855</span>,
                   xend = <span class="op">-</span><span class="fl">0.5869</span>,
                   yend = <span class="fl">0.2014</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span>() <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>() <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(
    legend.position = <span class="st">"none"</span>
  )
</pre></div>
<p><img src="reference/figures/README-motive_V_sf_pos-1.png" width="100%"></p>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>TBD</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>GPL (&gt;= 3) + file LICENSE</p>
<p>üê¢</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/vbaliga/pathviewR/">https://‚Äãgithub.com/‚Äãvbaliga/‚ÄãpathviewR/‚Äã</a>
</li>
<li>Report a bug at <br><a href="https://github.com/vbaliga/pathviewR/issues">https://‚Äãgithub.com/‚Äãvbaliga/‚ÄãpathviewR/‚Äãissues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://melissasarmstrong.com">Melissa S. Armstrong</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3059-0094" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.vikram-baliga.com/">Vikram B. Baliga</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9367-8974" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric">Eric R. Press</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1944-3755" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active ‚Äì The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/vbaliga/pathviewR/actions"><img src="https://github.com/vbaliga/pathviewR/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://travis-ci.org/vbaliga/pathviewR"><img src="https://travis-ci.org/vbaliga/pathviewR.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/vbaliga/pathviewR?branch=master"><img src="https://codecov.io/gh/vbaliga/pathviewR/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://melissasarmstrong.com">Melissa S. Armstrong</a>, <a href="https://www.vikram-baliga.com/">Vikram B. Baliga</a>, <a href="https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric">Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
